(this.webpackJsonpfinal_project=this.webpackJsonpfinal_project||[]).push([[0],{55:function(e,t,a){e.exports=a(90)},60:function(e,t,a){},61:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),l=a(22),c=a.n(l),o=(a(60),a(21)),s=a(18),i=a(14),u=(a(61),a(62),a(92)),m=a(93),d=a(94),f=a(95),g=a(96),E=a(114),p=a(115),h=a(97),b=a(116),y=a(98),v=function(e){var t=e.userData,a=e.onClickHelp,n=e.onClickAbout,l={color:"black",cursor:"pointer"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{color:"light",light:!0,expand:"md"},r.a.createElement(m.a,{href:"/"},"Classic Course Manager"),r.a.createElement(d.a,{className:"mr-auto"},r.a.createElement(f.a,null,r.a.createElement(g.a,{style:l,onClick:n}," ","About")),r.a.createElement(f.a,null,r.a.createElement(g.a,{style:l,href:"https://github.com/oakypokey/class2calendar"},"GitHub")),r.a.createElement(f.a,null,r.a.createElement(g.a,{style:l,onClick:a}," ","Help"," "))),r.a.createElement(C,{userData:t})))},O={borderRadius:"50%",maxWidth:"45px",float:"left",display:"inline-box"},j={float:"right",marginTop:"10px",marginLeft:"5px"},C=function(e){var t=e.userData;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{inNavbar:!0},r.a.createElement(p.a,{color:"light"},r.a.createElement(h.a,{style:O,right:!0,object:!0,src:t.picture,alt:"User Image"}),r.a.createElement("p",{style:j},r.a.createElement("b",null,t.given_name))),r.a.createElement(b.a,{right:!0},r.a.createElement(y.a,{href:"/logout"}," Logout "))))},k=a(99),w=a(100),S=a(101),x=a(102),D=a(46),T={fontSize:"0.85vw"},_={width:"40%"},N=function(e){var t=e.courseName,a=e.subjectName,n=e.section,l=e.professorName,c=e.timings,o=e.conflict,s=e.handleRemoveButtonClick,i=e.handleAddButtonClick,u=e.crn,m=e.basket,d={padding:"10px",margin:"5px",textAlign:"left",borderRadius:"5px",borderColor:"#000000",backgroundColor:e.color},f=function(e){var t=e.getHours(),a=e.getMinutes(),n=t>=12?"pm":"am";return(t=(t%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+n};return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{style:d},r.a.createElement(w.a,null,r.a.createElement("h4",null,t),o?r.a.createElement(S.a,{style:_,pill:!0,color:"danger"},"CONFLICT"):""),r.a.createElement(x.a,null,a," - ",n),r.a.createElement(x.a,null,"Professor ",l),r.a.createElement("br",null),null===c||void 0===c?void 0:c.map((function(e,t){return r.a.createElement(x.a,{key:t,style:T},["SUN","MON","TUES","WED","THURS","FRI"][e.weekday],": ",f(e.start)," to"," ",f(e.end))})),m?r.a.createElement(D.a,{color:"danger",onClick:function(){s(u)}}," ","Remove from Basket"," "):r.a.createElement(D.a,{color:"primary",onClick:function(){i(u)}}," ","Add to Basket"," ")))},A=a(103),M=a(104),H=a(105),R=a(106),W=a(107),B=a(108),F=a(49),I=a(109),P=function(e){e.requestError;var t=e.handleSubmit,a=e.setValues,n=e.values,l=function(e,t){switch(e){case"crn":a(Object(s.a)({},n,{crn:t}));break;case"class_name":a(Object(s.a)({},n,{class_name:t}));break;case"prof_name":a(Object(s.a)({},n,{prof_name:t}));break;case"class_name":a(Object(s.a)({},n,{class_name:t}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{fluid:!0,style:{background:"#cbf1f5"}},r.a.createElement(M.a,{onSubmit:function(e){return a=e,console.log(n),void t(a,n);var a},"data-testid":"class-search-form",style:{padding:"13px",width:"100%"}},r.a.createElement(H.a,null,r.a.createElement(R.a,{xl:2},r.a.createElement(W.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement(F.a,null,"CRN")),r.a.createElement(I.a,{name:"crn",value:n.crn,onChange:function(e){return l("crn",e.target.value)},placeholder:"12345","data-testid":"crn-input"}))),r.a.createElement(R.a,{xl:4},r.a.createElement(W.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement(F.a,null,"Class Name")),r.a.createElement(I.a,{name:"class-name",value:n.class_name,onChange:function(e){return l("class_name",e.target.value)},placeholder:"Intro to Comp Science: Python","data-testid":"class-input"}))),r.a.createElement(R.a,{xl:4},r.a.createElement(W.a,null,r.a.createElement(B.a,{addonType:"prepend"},r.a.createElement(F.a,null,"Professor Name")),r.a.createElement(I.a,{name:"prof-name",value:n.prof_name,onChange:function(e){return l("prof_name",e.target.value)},placeholder:"Mike Rossetti","data-testid":"prof-input"}))),r.a.createElement(R.a,{xl:2},r.a.createElement(D.a,{type:"submit",color:"primary"}," ","Search"," "))))))},J=a(117),Y=a(110),L=a(111),U=a(113),z=a(118),G=a(112),V=a(50),q=a(54),$=a(51),K=a(52),Q=(a(80),a(81),a(82),function(e){var t=e.events,a=e.academicCalEvents,l=Object(n.useState)(new Date),c=Object(i.a)(l,2),s=(c[0],c[1],r.a.createRef()),u=Object(n.useState)(a),m=Object(i.a)(u,2),d=m[0],f=m[1],g=function(e){var t={startTime:"08:00",endTime:"17:45",defaultDate:new Date};if(e.length<1)return t;e.sort((function(e,t){return e.start>t.start?1:-1})),t.defaultDate=e[0].start;var a=(e[0].start.getHours()-1).toString(),n=e[0].start.getMinutes().toString();a=("00000"+a).slice(-2),n=("00000"+n).slice(-2);var r=(e[e.length-1].end.getHours()+1).toString(),l=e[e.length-1].end.getMinutes().toString();r=("00000"+r).slice(-2),l=("00000"+l).slice(-2);var c=e[e.length-1].end.getHours()>17,o=e[0].start.getHours()<8;return e[e.length-1].end.getHours()-e[0].start.getHours()>=7||c||o||(t.startTime="".concat(a,":").concat(n),t.endTime="".concat(r,":").concat(l)),t},E=Object(n.useState)(g(d)),p=Object(i.a)(E,2),h=(p[0],p[1]);return Object(n.useEffect)((function(){var e=Object(o.a)(a),t=s.current;if(t){var n=t.getApi();e.sort((function(e,t){return e.start>t.start?1:-1}));e.length>1&&n.gotoDate("2020-09-15")}f(a)}),[a]),Object(n.useEffect)((function(){var e=[];t.map((function(e){var t,a=e,n=null===(t=e.timings)||void 0===t?void 0:t.map((function(e){return{start:new Date(e.start),end:new Date(e.end),weekday:e.weekday,rrule:e.rrule,duration:e.duration}}));return a.timings=n,a})).forEach((function(t){var a;null===(a=t.timings)||void 0===a||a.forEach((function(a){e.push({start:a.start,end:a.end,title:t.courseName,allDay:!1,rrule:a.rrule,duration:a.duration,color:t.color})}))})),console.log("this is new event state",e),f([].concat(Object(o.a)(a),e)),h(g([].concat(e)))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{events:d,defaultView:"timeGridWeek",plugins:[q.a,$.a,K.a],weekends:!1,slotDuration:{minutes:30},minTime:"07:30",maxTime:"22:45",slotEventOverlap:!0,allDaySlot:!0,slotLabelInterval:{minutes:90},ref:s}))}),X=function(e){var t=e.modal,a=(e.toggle,e.setModal),l=e.loading,c=e.execute,o=e.message,s=e.title,u=e.setMessage,m=e.buttonSettings,d=Object(n.useState)(!1),f=Object(i.a)(d,2),g=f[0],E=f[1],p=function(){E(!1),u(""),a(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{isOpen:t,toggle:p},r.a.createElement(Y.a,{toggle:p},s),r.a.createElement(L.a,null,l?r.a.createElement(G.a,{size:"lg"}):function(){if("success"==m.type){var e=o.split("!");return r.a.createElement(r.a.Fragment,null,e.shift(),r.a.createElement("ul",null,e.map((function(e){return r.a.createElement("li",null,e)}))))}return o}()),r.a.createElement(U.a,null,r.a.createElement(D.a,{disabled:g,color:m.type,onClick:function(){c(),E(!0)}},m.text)," ",r.a.createElement(D.a,{color:"secondary",onClick:p},"Cancel"))))},Z={id:"",title:"Select a calendar",color:"#f0f0f0",primary:!1,selected:!1};var ee=function(){var e,t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=(a[1],Object(n.useState)([])),u=Object(i.a)(c,2),m=u[0],d=u[1],f=Object(n.useState)([]),g=Object(i.a)(f,2),h=g[0],O=g[1],j=Object(n.useState)(!1),C=Object(i.a)(j,2),k=C[0],w=C[1],S=Object(n.useState)([]),x=Object(i.a)(S,2),T=x[0],_=x[1],M=Object(n.useState)({}),W=Object(i.a)(M,2),B=W[0],F=W[1],I=Object(n.useState)(Z),V=Object(i.a)(I,2),q=V[0],$=V[1],K=Object(n.useState)(!1),ee=Object(i.a)(K,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),re=Object(i.a)(ne,2),le=re[0],ce=re[1],oe=Object(n.useState)(""),se=Object(i.a)(oe,2),ie=se[0],ue=se[1],me=Object(n.useState)(!1),de=Object(i.a)(me,2),fe=de[0],ge=de[1],Ee=Object(n.useState)(!1),pe=Object(i.a)(Ee,2),he=pe[0],be=pe[1],ye=Object(n.useState)(!1),ve=Object(i.a)(ye,2),Oe=ve[0],je=ve[1],Ce=Object(n.useState)(!1),ke=Object(i.a)(Ce,2),we=ke[0],Se=ke[1],xe=function(){return je(!Oe)},De=function(){return Se(!we)},Te=function(){return ge(!fe)},_e={dep_name:"",crn:"",prof_name:"",class_name:""},Ne=Object(n.useState)(_e),Ae=Object(i.a)(Ne,2),Me=Ae[0],He=Ae[1];Object(n.useEffect)((function(){fetch("/api/getacademiccalinfo").then((function(e){return e.json()})).then((function(e){var t;e.error?console.log("Error when fetching response: "+e.message):(t=e.events.map((function(e){var t=new Date,a=new Date;e.start.date&&e.end.date?(t=new Date(Date.parse(e.start.date)),t=new Date(Date.parse(e.end.date))):e.start.dateTime&&e.end.dateTime&&(t=new Date(Date.parse(e.start.dateTime)),a=new Date(Date.parse(e.end.dateTime)));var n=t.getTime()-a.getTime()>828e5;return{start:t,end:a,title:e.summary,allDay:n}})),_(t),fetch("/api/user_data").then((function(e){return e.json()})).then((function(e){var t=e.user_calendar_book;t.sort((function(e,t){return e.selected===t.selected?0:e.selected?-1:1}));var a=Object(s.a)({},e.session,{calendar_book:t});F(a)})))}))}),[]),Object(n.useEffect)((function(){if(B.calendar_book){var e=B.calendar_book.filter((function(e){return e.primary}))[0];$(e)}}),[B]);var Re,We=function(){var e=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};return function(){var t=e(0,360),a=e(42,98),n=e(40,90);return"hsl(".concat(t,",").concat(a,"%,").concat(n,"%)")}}(),Be=function(e){var t=m;t=t.filter((function(t){return t.crn===e&&O([].concat(Object(o.a)(h),[t])),t.crn!==e})),console.log(t),d(t)},Fe=function(e){O(h.filter((function(t){return t.crn!==e})));var t=h.filter((function(t){return t.crn===e}));d([].concat(Object(o.a)(m),Object(o.a)(t)))},Ie={borderColor:"grey",borderWidth:"2px",borderStyle:"solid",height:"80vh"};return r.a.createElement("div",{className:"App"},r.a.createElement(v,{userData:B,onClickAbout:function(){xe()},onClickHelp:function(){De()}}),he?r.a.createElement(X,{modal:fe,toggle:Te,setModal:ge,execute:function(){ce(!0);var e={basket:m,calendar_id:q.id};fetch("/api/user_events",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.body.map((function(e){return e.summary})),a="The following classes are currently on your calendar:!"+(t=t.filter((function(e,a){return t.indexOf(e)===a}))).join("!");ue(a),ce(!1),d([])}))},loading:le,message:ie,setMessage:ue,title:"Calendar Export",buttonSettings:{type:"success",text:"Export classes"}}):r.a.createElement(X,{modal:fe,toggle:Te,setModal:ge,execute:function(){ce(!0),fetch("/api/clear_events",{method:"POST",body:JSON.stringify({calendar_id:q.id}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),ce(!1),ue("All Classic Events were deleted successfully!")})).catch((function(e){console.log(e),ce(!1),ue("An error occured")}))},loading:le,message:ie,setMessage:ue,title:"Clear Classic Events",buttonSettings:{type:"danger",text:"Delete Events"}}),r.a.createElement(J.a,{isOpen:Oe,toggle:xe},r.a.createElement(Y.a,{toggle:xe},"About"),r.a.createElement(L.a,null,r.a.createElement("h3",null,"What is this?"),"This application was created for OPIM 244. You can use this application to search for classes, plan your schedule, and export your courses to your google calendar. Classic is smart in the way that it is able to automatically detect holidays and breaks and will not add classes to those days.",r.a.createElement("h3",null,"Disclaimer"),"Classic is in Beta which means sometimes things may not work as intended. Classic does not store any information from your calendar. When you logout, your session data is deleted from the server and cannot be recovered. Classic will only remove events from your calendar that were created by Classic. Course information is sourced from a third party and may not be accurate."),r.a.createElement(U.a,null,r.a.createElement(D.a,{color:"primary",onClick:xe},"Close"))),r.a.createElement(J.a,{isOpen:we,toggle:De},r.a.createElement(Y.a,{toggle:De},"Help"),r.a.createElement(L.a,null,r.a.createElement("h3",null,"Common Issues"),r.a.createElement("ul",null,r.a.createElement("li",null,"If you are unable to see your photo or your list of calendars, please log out and then log back in"),r.a.createElement("li",null,'Need to redo your schedule? Select the calendar where previous Classic events are stored and click "Clear Calendar" to remove all events generated by Classic'),r.a.createElement("li",null,"Want to delete individual events? You can delete them from the Google Calendar App"))),r.a.createElement(U.a,null,r.a.createElement(D.a,{color:"primary",onClick:De},"Close"))),r.a.createElement(A.a,{fluid:!0},r.a.createElement(H.a,null,r.a.createElement(R.a,{xl:12},r.a.createElement(P,{handleSubmit:function(e,t){e.preventDefault(),w(!1),ae(!0),O([]),m.filter((function(e){return e.crn==l})).length<1?fetch("/api/getinfo",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){try{return e.json()}catch(t){throw console.log(t),t}})).then((function(e){if(e.error)throw new Error(e.message);return console.log(e),e})).then((function(e){var t=e.results.map((function(e){var t=e.timings.map((function(e){return{weekday:new Date(e.start).getDay(),start:new Date(e.start),end:new Date(e.end),rrule:e.rrule,duration:e.duration}}));return{courseName:e.name,subjectName:e.sname,section:e.section,professorName:e.professor__name,crn:e.crn.toString(),timings:t,color:We()}}));console.log(JSON.stringify(t)),O(t)})).catch((function(e){w(!0),console.log("OOOO",e)})).finally((function(){He(_e),ae(!1)})):w(!0)},setValues:He,values:Me,requestError:k}),k?r.a.createElement(z.a,{label:"errmsg",color:"danger"},"There was an error. Please try again."):"")),r.a.createElement(H.a,null,r.a.createElement(R.a,{xl:2,style:Object(s.a)({},Ie,{overflowY:"auto"})},te?r.a.createElement(G.a,{style:{width:"8rem",height:"8rem",marginTop:"100%"}}):"",h.map((function(e,t){if(!m.map((function(e){return e.crn})).includes(e.crn))return r.a.createElement(N,Object.assign({key:t,handleAddButtonClick:Fe},e))}))),r.a.createElement(R.a,{xl:2,style:Object(s.a)({},Ie,{overflowY:"auto"})},m.map((function(e,t){return r.a.createElement(N,Object.assign({key:t,handleRemoveButtonClick:Be,basket:!0},e))}))),r.a.createElement(R.a,{xl:6,style:Ie},r.a.createElement(Q,{events:m,academicCalEvents:T})),r.a.createElement(R.a,{xl:2,style:Ie},r.a.createElement("br",null),r.a.createElement("h4",{style:{textAlign:"left"}}," Calendar Selection "),r.a.createElement(E.a,{group:!0,size:"md"},r.a.createElement(p.a,{style:(Re=q,{backgroundColor:Re.color}),caret:!0}," ",q.title),r.a.createElement(b.a,null,null===(e=B.calendar_book)||void 0===e?void 0:e.map((function(e,t){var a=e.id==q.id;return r.a.createElement(y.a,{active:a,key:t,onClick:function(){return $(e)}},e.title)})))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h4",{style:{textAlign:"left"}}," Export "),r.a.createElement(D.a,{disabled:!(m.length>0),onClick:function(){be(!0),ue("You are about to export your basket. Are you sure?"),Te()},color:"primary"},"Export to Calendar"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h5",{style:{textAlign:"left"}}," ","Clear all Classic events from ",q.title," "),r.a.createElement(D.a,{color:"danger",onClick:function(){be(!1),ue("Would you like to clear all Classic events for: "+q.title+"?"),Te()}},"Clear Calendar")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.0375202c.chunk.js.map